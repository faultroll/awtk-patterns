# 基于MVP开发的计算器

MVC模式解决分离用户界面和业务逻辑的问题，但是还有一个重要的问题没有解决： 控制器是界面相关的，没有办法为控制器编写单元测试程序。为了解决上面的问题，MVP模式应运而生。MVP是Model-View-Presenter简称。

![mvc](../../images/mvp.png?raw=true)

模型(Model)。模型还是MVC中的模型，这里不再赘述。

视图(View)。视图还是MVC中的视图，但它不需要向模型注册改变的事件通知了，这个由呈现逻辑去做了。

呈现逻辑(Presenter)。Controller变成了Presenter只是表面现象，最重要的是MVP对视图进行了抽象，呈现逻辑不再向控制器那样直接访问具体的视图了，而是通过视图的接口去访问视图，视图的接口是抽象的，可以有不同的实现，所以可以方便的Mock出一个视图，让编写呈现逻辑的单元测试程序成为可能。注意，这里视图的接口并不是通用的，每个视图都有一个独立的接口，有一个真正的实现和一个用于测试Mock的实现。

从理论上讲，MVP模式已经很完备了，它很好的分离的界面和实现，也可以为呈现逻辑编写单元测试程序了。但是从工程角度来看，MVP却有一个非常致命的缺陷：要编写大量无聊的代码！






